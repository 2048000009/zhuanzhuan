/*!
 * 
 * @zz-common/lego v4.1.7
 * @author chenjinxin <chenjinxin@zhuanzhuan.com>
 * Copyright 2018-present, zz.
 *       
 */
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports["@zz-common/lego"]=e():t["@zz-common/lego"]=e()}("undefined"!=typeof self?self:this,function(){return function(t){function e(n){if(a[n])return a[n].exports;var i=a[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,e),i.l=!0,i.exports}var a={};return e.m=t,e.c=a,e.d=function(t,a,n){e.o(t,a)||Object.defineProperty(t,a,{configurable:!1,enumerable:!0,get:n})},e.n=function(t){var a=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(a,"a",a),a},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=14)}([function(t,e,a){"use strict";a.d(e,"a",function(){return i}),a.d(e,"d",function(){return r}),a.d(e,"c",function(){return o}),a.d(e,"b",function(){return s});var n="";"undefined"!=typeof location&&location.hostname&&(n=location.hostname.indexOf("zhuanzhuan.com")>0?"zhuanzhuan.com":location.hostname.indexOf("58.com")>0?"58.com":location.hostname);var i=function(t){if(t){var e="; "+document.cookie,a=e.split("; "+t+"=");return 2===a.length?a.pop().split(";").shift():null}var n=document.cookie.split(/;\s+/),i={};return n&&n.length&&n.forEach(function(t){var e=t.split("=");e&&2===e.length&&(i[e[0]]=e[1])}),i},r=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=(new Date).getTime()+7776e3;for(var a in t)t.hasOwnProperty(a)&&(document.cookie=a+"="+t[a]+"; domain="+n+"; path=/; expires="+new Date(e).toUTCString())},o=function(t){var e=new Date;e.setTime(e.getTime()-1);var a=i(t);null!=a&&(document.cookie=t+"="+a+"; domain="+n+"; path=/; expires="+new Date(e).toUTCString())},s=function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"PPU",e=/([^&=]+)=?([^&]*)/g,a=i(t)||"",n={},r=e.exec(a);null!==r;r=e.exec(a))n[r[1]]=r[2];return n}},,function(t,e,a){"use strict";var n=a(0),i=function(){return Object(n.a)("uid")||Object(n.b)().UID||Object(n.a)("kid")||""};e.a=i},,,function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={version:"4.1.7"}},,,,function(t,e,a){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){var a=document.createElement("script");a.type="text/javascript",void 0!==e&&(a.readyState?a.onreadystatechange=function(){"loaded"!==a.readyState&&"complete"!==a.readyState||(a.onreadystatechange=null,e())}:a.onload=function(){e()}),a.src=t,document.body.appendChild(a)}function r(t){var e=document.createElement("link");e.rel="stylesheet",e.type="text/css",e.href=t,document.getElementsByTagName("head")[0].appendChild(e)}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t){if(Array.isArray(t)){for(var e=0,a=Array(t.length);e<t.length;e++)a[e]=t[e];return a}return Array.from(t)}function c(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e,a){try{var n=0,i=t.tagName;if("SCRIPT"!==i&&"STYLE"!==i&&"META"!==i&&"HEAD"!==i){var r=t.children?t.children.length:0;if(r>0)for(var o=t.children,s=r-1;s>=0;s--)n+=u(o[s],e+1,n>0);if(n<=0&&!a&&!(t.getBoundingClientRect&&t.getBoundingClientRect().top<O))return 0;n+=1+.5*e}return n}catch(t){}}function p(t){try{for(var e=1;e<t.length;e++)if(t[e].score<t[e-1].score)return t.splice(e,1),p(t);return t}catch(t){}}var m=a(0),h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},l=function(){function t(t,e){for(var a=0;a<e.length;a++){var n=e[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,a,n){return a&&t(e.prototype,a),n&&t(e,n),e}}(),f=function(){function t(){n(this,t),this.UA=window.navigator.userAgent.toLowerCase(),this.isIOS=/iphone|ipad|ipod|ios/gi.test(this.UA),this.isAndroid=/android/gi.test(this.UA),this.isChrome=/chrome/gi.test(this.UA),this.isSafari=/safari/gi.test(this.UA)}return l(t,[{key:"_getAjax",value:function(t,e,a){e.callback=a,this.isAndroid?function(){if(window.zhuanzhuanMApplication){var a=JSON.stringify(e);window.zhuanzhuanMApplication.executeCmd(t,a)}}():function(){var a=document.createElement("iframe");a.style.width="1px",a.style.height="1px",a.style.display="none",e.methodName=t;var n=JSON.stringify(e);a.src="zznative://zhuanzhuan.hybrid.ios/?infos="+encodeURIComponent(n),document.body.appendChild(a),setTimeout(function(){return a.remove()},300)}()}},{key:"_getAjaxCallBack",value:function(t){return window.zzcallback_netWork=function(e,a){t("0"==e?/^\{.*\}$/.test(a)?JSON.parse(a):a:{code:0,operatorType:"0",netWorkType:navigator.connection&&navigator.connection.type||"0"})},"zzcallback_netWork"}},{key:"getOS",value:function(){try{var t="";return this.UA&&(t=this.isAndroid?"android":this.isIOS?"ios":"pc"),t}catch(t){return"pc"}}},{key:"getNetType",value:function(t){this._getAjax("getNetworkTypeAndOperator",{},this._getAjaxCallBack(t))}},{key:"getPhoneType",value:function(){var t=Object(m.a)("model");return t&&"undefined"!=t?t:""}},{key:"getLonAndLat",value:function(){var t=Object(m.a)("lon"),e=Object(m.a)("lat");return{lon:t&&"undefined"!=t?t:0,lat:e&&"undefined"!=e?e:0}}},{key:"getZZV",value:function(){var t=Object(m.a)("v");return t&&"undefined"!=t?t:""}},{key:"isZZ",value:function(){return~~(this.UA.indexOf("zhuanzhuan")>0)}},{key:"getUnique",value:function(){var t=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var a=(t+16*Math.random())%16|0;return t=Math.floor(t/16),("x"==e?a:3&a|8).toString(16)})}},{key:"isDom",value:function(t){return"object"===("undefined"==typeof HTMLElement?"undefined":h(HTMLElement))?t instanceof HTMLElement:t&&"object"===(void 0===t?"undefined":h(t))&&1===t.nodeType&&"string"==typeof t.nodeName}}]),t}(),d=f,g=function(){try{var t=location.hostname,e=location.pathname,a=location.hash;if(e&&-1!==e.indexOf("Mzhuanzhuan/zhuanzhuan/zzactivity"))try{t="m.zhuanzhuan.com-Mzhuanzhuan-zhuanzhuan_zzactivity_magic-/"+location.href.match(/magic\/([0-9a-zA-Z]{18,})\/index.html/)[1]+"/index.html"}catch(e){t="m.zhuanzhuan.com-Mzhuanzhuan-zhuanzhuan_zzactivity_magic-/MzhuanzhuanError/index.html"}else e&&"/"!==e&&e.split("/").forEach(function(e){""!==e&&"__defHashRooter__"!==e&&(e=e.replace(/^[0-9a-zA-Z]{18,}$/,":id").replace(/^[0-9]{5,}$/,":id").replace("undefined",":id").replace("index_sonic","index"),/[\u4e00-\u9fa5]/g.test(e)&&(e=":search"),t+="-"+e.replace(/-/g,"_"))});var n="";return a&&(a=a.replace(/\?.*/,"").replace(/^#/,""),a.split("/").forEach(function(t){""!==t&&(t=t.replace(/^[0-9a-zA-Z]{18,}$/,":id").replace(/^[0-9]{5,}$/,":id").replace("undefined",":id"),/[\u4e00-\u9fa5]/g.test(decodeURI(t))&&(t=":search"),(/rent-order-detail/.test(a)||/personallevelexplain/.test(a))&&(t=t.replace(/^[0-9]{1}$/,":id")),"__defHashRooter__"!==t&&(n+="/"+t.replace(/-/g,"_")))})),n?t+"-"+n:t}catch(t){return""}},v=a(2),y=a(5),b=function(){-1!==window.location.href.indexOf("LEGO_DEV_MODEL=LEGO_DEV_MODEL")&&setTimeout(function(){i("https://s1.zhuanstatic.com/common/trade/js/SCORE_ITEMS_CHART.js?"+Math.random()),r("https://s1.zhuanstatic.com/common/trade/js/SCORE_ITEMS_CHART.css?"+Math.random())},2e3)},k=b,T=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(t[n]=a[n])}return t},S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},x=function(){function t(t,e){for(var a=0;a<e.length;a++){var n=e[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,a,n){return a&&t(e.prototype,a),n&&t(e,n),e}}(),w=new d,_={},E=function(){function t(){if(o(this,t),this.hasInitHandler)return this;try{if(this.LEGO="//lego.zhuanzhuan.com/page/mark",this.NET_SPEED_IMG_BIG="//m.zhuanzhuan.com/common/net_big.png",this.NET_SPEED_IMG_SMALL="//m.zhuanzhuan.com/common/net_small.png",this.NET_SPEED_IMG_SIZE=5,this.performance=window.performance||window.webkitPerformance||"",!this.supportTiming())return;this.params={appid:"ZHUANZHUAN",actiontype:"PERFORMANCE",abtesttype:"ALL",lon:0,lat:0,ua:w.UA,os:w.getOS(),backup:{fromType:"m",version:y.default&&"object"===(void 0===y.default?"undefined":S(y.default))&&y.default.version||"4.0.0",isoffline:Object(m.a)("isoffline")||0,isFirst:1,iszz:w.isZZ(),netType:navigator&&navigator.connection&&navigator.connection.effectiveType,operatorType:"",zzv:w.getZZV(),phoneType:w.getPhoneType(),size:"",rdStartTime:0,rdEndTime:0,fStartTime:0,cStartTime:0,cEndTime:0,dnsStartTime:0,dnsEndTime:0,dnsTime:0,fpTime:0,fpEndTime:0,domStartTime:0,sourceTime:0,imgsTime:0,firstPiantTime:0,readyTime:0,atfStartTime:0,domLoadedTime:0,atfTime:0,activeTime:0,loadTime:0,domain:[],source:[],ajax:[],sourceMax:0,sourceMin:0,imgsMax:0,imgsMin:0,fmp:30001,fmpImg:30002}},this._now(),w.isZZ()&&this._getNetType()}catch(t){}this.hasInitHandler=!0}return x(t,[{key:"set",value:function(t){T(_,t)}},{key:"supportTiming",value:function(){try{return!(!this.performance||!this.performance.timing)||(console.error("WARN: \u5f53\u524d\u73af\u5883\u4e0d\u652f\u6301 performance API\uff0c\u8bf7\u5ffd\u7565\uff01"),!1)}catch(t){return!1}}},{key:"_now",value:function(){try{var t=this.performance;this.performance.now=t?function(){return t.now||t.mozNow||t.msNow||t.oNow||t.webkitNow||function(){return(new Date).getTime()-t.timing.navigationStart}}():""}catch(t){this.performance.now=""}}},{key:"_getNetType",value:function(){try{if("object"!=S(this.params.backup))return;this.params.backup.netType=navigator&&navigator.connection&&navigator.connection.effectiveType}catch(t){}}},{key:"send",value:function(t){var e=t.atfStartTime,a=void 0===e?0:e;if("object"==S(this.params.backup)){T(this.params.backup,_);try{if(!this.supportTiming())return void console.error("\u4e0d\u652f\u6301 performance API\uff01");this.params.pagetype=g(),this.params.backup.atfStartTime=parseInt(a),this._load()}catch(t){}}}},{key:"_load",value:function(){var t=this;if("object"==S(this.params.backup)){var e=function(){t.loadcnt=Object(m.a)(t.params.pagetype+"-isindex")||0,t.params.cookieid=Object(v.a)()||Object(m.a)("idzz")||Object(m.a)("id58")||Object(m.a)("uuid")||Object(m.a)("58uuid")||0;try{t._calculateParams();var e=w.getUnique(),a=window.performanceData||(window.performanceData={}),n=a[e]=new Image;n.onload=n.onerror=function(){n.onload=n.onerror=null,n=a[e]=null};var i=t.LEGO+"?"+t._paramsToStr()+"&_unique="+e;0!==t.params.backup.loadTime&&(window.SCORE_ITEMS_PERF_DATA=i,n.src=i,document.cookie=t.params.pagetype+"-isindex="+ ++t.loadcnt,k())}catch(t){}};this._calculateNetSpeed(e)}}},{key:"_calculateNetSpeed",value:function(t){var e=this,a=!1,n=setTimeout(function(){clearTimeout(n),n=null,a||(e.params.backup.netSpeed="30004",a=!0,t&&t())},4500);try{var i=window.netSpeedSmallImg||(window.netSpeedSmallImg={}),r=window.netSpeedImg||(window.netSpeedImg={}),o=w.getUnique(),s=i[o]=new Image,c=r[o]=new Image,u=0;s.onload=s.onerror=function(){s.onload=s.onerror=null,s=i[o]=null,u=e.performance.now?e.performance.now():(new Date).getTime(),c.src=e.NET_SPEED_IMG_BIG+"?_unique="+o},s.src=this.NET_SPEED_IMG_SMALL+"?_unique="+o,c.onload=c.onerror=function(){c.onload=c.onerror=null,c=r[o]=null;var n=parseInt((e.performance.now?e.performance.now():(new Date).getTime())-u,10)||0;e.params.backup.netSpeed=(1e3*e.NET_SPEED_IMG_SIZE/n).toFixed(2),a=!0,t&&t()}}catch(e){this.params.backup.netSpeed="30003",a=!0,t&&t()}}},{key:"_getAppData",value:function(){if("object"==S(this.params.backup))try{if(this.params.ua=w.UA,this.params.os=w.getOS(),this.params.backup.iszz=w.isZZ(),w.isZZ()){var t=w.getLonAndLat();this.params.lon=t.lon,this.params.lat=t.lat,this.params.backup.zzv=w.getZZV(),this.params.backup.phoneType=w.getPhoneType()}else this.params.backup.netType=navigator&&navigator.connection&&navigator.connection.effectiveType||""}catch(t){}}},{key:"_calculateParams",value:function(){if("object"==S(this.params.backup)){var t=function(t){return Math.min(1e6,Math.max(parseInt(t),0))};try{var e=(this.params.backup.atfTime,this.performance.timing);this.params.backup.rdStartTime=e.redirectStart-e.navigationStart>0?e.redirectStart-e.navigationStart:0,this.params.backup.rdEndTime=e.redirectEnd-e.navigationStart>0?e.redirectEnd-e.navigationStart:0,this.params.backup.fStartTime=t(e.fetchStart-e.navigationStart),this.params.backup.cStartTime=t(e.connectStart-e.navigationStart),this.params.backup.cEndTime=t(e.connectEnd-e.navigationStart),this.params.backup.dnsStartTime=t(e.domainLookupStart-e.navigationStart),this.params.backup.dnsEndTime=t(e.domainLookupEnd-e.navigationStart),this.params.backup.dnsTime=t(e.domainLookupEnd-e.domainLookupStart),this.params.backup.fpTime=t(e.responseStart-e.navigationStart),this.params.backup.fpEndTime=t(e.responseEnd-e.navigationStart),this.params.backup.domStartTime=t(e.domLoading-e.navigationStart),this.params.backup.sourceTime=0,this.params.backup.readyTime=t(e.domInteractive-e.navigationStart),this.params.backup.atfStartTime||(this.params.backup.atfStartTime=this.params.backup.readyTime),this.params.backup.domLoadedTime=t(e.domContentLoadedEventStart-e.navigationStart),this.params.backup.activeTime=t(e.domComplete-e.navigationStart),this.params.backup.loadTime=t(e.loadEventEnd-e.navigationStart),this._classifyResource(),this._getAppData(),this.params.backup.isFirst=this.loadcnt>1?0:1,this.params.backup=encodeURIComponent(JSON.stringify(this.params.backup))}catch(t){this.params.backup=""}}}},{key:"_getResult",value:function(t){try{var e={start:void 0!==t.fetchStart?parseInt(t.fetchStart,10):0,fstart:void 0!==t.requestStart?parseInt(t.requestStart||t.fetchStart,10):0,end:void 0!==t.responseEnd?parseInt(t.responseEnd,10):0},a="";if("navigation"==t.initiatorType){var n=t.name.match(/(?!\/+)[^\/]*.htm[l]?/gi);a=n&&n.length?n[0]:t.name,e.name=a}else{var i=t.name.match(/\/(.*)?(?=\?)/gi);a=i&&i.length?i[0].split("/").pop():t.name.split("/").pop(),e.name=a.replace(/\.(.*?)\./g,".")}return e}catch(e){return{start:0,fstart:0,end:0,name:t.name.split("/").splice(-1,1)[0]}}}},{key:"_classifyResource",value:function(){try{var t={fe:[],be:[],imgs:[]},e=[],a=[],n=[],i=[],r=[],o=[];if(this.performance.getEntries){var s=this.performance.getEntries(),c=s.length,u=0;this.params.backup.firstPiantTime=0;var p=0!==this.params.backup.atfTime?1.2*this.params.backup.atfTime:1.7*this.params.backup.loadTime;for(u;u<c;u++){var m=s[u];if((m.startTime||"navigation"===m.initiatorType)&&m.startTime<p){if(["navigation","link"].indexOf(m.initiatorType)>=0){var h=this._getResult(m);t.fe.push(h),"link"===m.initiatorType?(e.push(h.end>0?h.end:0),a.push(h.start>0?h.start:0)):this.params.backup.bodysize=m.decodedBodySize}else if(["script","xmlhttprequest"].indexOf(m.initiatorType)>=0)if(/\.(png|gif|jpeg|webp|jpg)/gi.test(m.name)&&!/net_(small|big)\.png/gi.test(m.name)){var l=this._getResult(m);t.imgs.push(l),r.push(l.end>0?l.end:0),o.push(l.start>0?l.start:0)}else if(/\.(js|css|png|gif|jpeg|webp|jpg)/gi.test(m.name)){if(/\.js/gi.test(m.name)&&!/\.json/gi.test(m.name)){var f=this._getResult(m);t.fe.push(f),e.push(f.end>0?f.end:0),a.push(f.start>0?f.start:0)}}else{var d=this._getResult(m);t.be.push(d),n.push(d.end>0?d.end:0),i.push(d.start>0?d.start:0)}else if(["img","css"].indexOf(m.initiatorType)>=0&&/\.(png|gif|jpeg|webp|jpg)/gi.test(m.name)&&!/net_(small|big)\.png/gi.test(m.name)){var g=this._getResult(m);t.imgs.push(g),r.push(g.end>0?g.end:0),o.push(g.start>0?g.start:0)}"paint"==m.entryType&&"first-contentful-paint"==m.name&&(this.params.backup.firstPiantTime=parseInt(m.startTime))}}}this.params.backup.sourceMax=e.length?Math.max.apply(null,e):0,this.params.backup.sourceMin=a.length?Math.min.apply(null,a)<0?0:Math.min.apply(null,a):0,this.params.backup.sourceTime=this.params.backup.sourceMax-this.params.backup.sourceMin>0?this.params.backup.sourceMax-this.params.backup.sourceMin:0,this.params.backup.ajaxMax=n.length?Math.max.apply(null,n):0,this.params.backup.ajaxMin=i.length?Math.min.apply(null,i):0,this.params.backup.ajaxTime=this.params.backup.ajaxMax-this.params.backup.ajaxMin||0,this.params.backup.imgsMax=r.length?Math.max.apply(null,r):0,this.params.backup.imgsMin=o.length?Math.min.apply(null,o)<0?0:Math.min.apply(null,o):0,this.params.backup.imgsTime=this.params.backup.imgsMax-this.params.backup.imgsMin>0?this.params.backup.imgsMax-this.params.backup.imgsMin:0,e=a=n=i=r=o=null,this.params.backup.source=t.fe,this.params.backup.ajax=t.be,this._getAjaxAbout(),this._getSourceAbout(),30001!==this.params.backup.atfTime&&0!==this.params.backup.atfTime||(0!==this.params.backup.loadTime?this.params.backup.atfTime=parseInt(this.params.backup.loadTime):this.params.backup.atfTime=parseInt(this.params.backup.activeTime)),this.params.backup.ajax.length&&this.params.backup.firstPiantTime&&this.params.backup.firstPiantTime<this.params.backup.ajaxFirstMax&&(this.params.backup.firstPiantTime=parseInt(this.params.backup.ajaxFirstMax))}catch(t){}}},{key:"_getSourceAbout",value:function(){var t=this;try{this.params.backup.source.length&&(this.params.backup.source=this.params.backup.source.map(function(e){return e.start<t.params.backup.firstPiantTime&&(e.first=!0),e.name+"|"+e.start+"|"+e.fstart+"|"+e.end+"|"+(e.first||!1)}))}catch(t){}}},{key:"_getAjaxAbout",value:function(){var t=this;try{this.params.backup.ajax.length&&(this.params.backup.ajax=this.params.backup.ajax.map(function(e){return e.start<t.params.backup.firstPiantTime&&(e.first=!0),e.name+"|"+e.start+"|"+e.fstart+"|"+e.end+"|"+(e.first||!1)}))}catch(t){}}},{key:"_paramsToStr",value:function(){var t="";for(var e in this.params)t+=e+"="+this.params[e]+"&";return t=t.substr(0,t.length-1)}}]),t}(),z=E,M={_getImgSrcFromBgImg:function(t){var e,a=t.match(/url\(.*?\)/g);if(a&&a.length){var n=a[a.length-1],i=n.replace(/^url\([\'\"]?/,"").replace(/[\'\"]?\)$/,"");(/^http/.test(i)||/^\/\//.test(i))&&(e=i)}return e},getImgSrcFromDom:function(t,e){if(!(t.getBoundingClientRect&&t.getBoundingClientRect().top<window.innerHeight))return!1;e=[/(\.)(png|jpg|jpeg|gif|webp|ico|bmp|tiff|svg)/i];var a;if("IMG"==t.nodeName.toUpperCase())a=t.getAttribute("src");else{var n=window.getComputedStyle(t),i=n.getPropertyValue("background-image")||n.getPropertyValue("background"),r=this._getImgSrcFromBgImg(i,e);r&&this._isImg(r,e)&&(a=r)}return a},_isImg:function(t,e){for(var a=0,n=e.length;a<n;a++)if(e[a].test(t))return!0;return!1}},j=M,I=function(){function t(t,e){for(var a=0;a<e.length;a++){var n=e[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,a,n){return a&&t(e.prototype,a),n&&t(e,n),e}}(),O=window.innerHeight,A=[],P=function(){function t(e){c(this,t),this.muo=MutationObserver,this.observer=null,this.sendMark=!1,this.perf=e,this.imgs=[],this.mark="start",this.initObserver()}return I(t,[{key:"supportTiming",value:function(){try{return!(!performance||!performance.timing)||(console.error("WARN: \u5f53\u524d\u73af\u5883\u4e0d\u652f\u6301 performance API\uff0c\u8bf7\u5ffd\u7565\uff01"),!1)}catch(t){return!1}}},{key:"initObserver",value:function(){var t=this;try{if(this.supportTiming()&&(this.observer=new MutationObserver(function(){var t=Date.now()-performance.timing.fetchStart,e=document.body;if(e){var a=0;a+=u(e,1,!1),A.push({score:a,t:t})}else A.push({score:0,t:t})})),this.observer.observe(document,{childList:!0,subtree:!0}),"complete"===document.readyState)this.mark="readyState",this.calFinallScore();else{var e=function t(){Date.now()>2e3&&(a.calFinallScore(),this.mark="touch",window.removeEventListener("touchstart",t,!0))};window.addEventListener("load",function(){t.mark="load",t.calFinallScore()},!0),window.addEventListener("beforeunload",function(){t.mark="beforeunload",t.calFinallScore()},!0);var a=this;window.addEventListener("touchstart",e,!0)}}catch(t){}}},{key:"calFinallScore",value:function(){var t=this;try{if(this.sendMark)return;var e=Date.now()-performance.timing.fetchStart,a=e>3e4||A&&A.length>4&&e-(A&&A.length&&A[A.length-1].t||0)>1e3||A.length>10&&0!==window.performance.timing.loadEventEnd&&A[A.length-1].score===A[A.length-9].score;if(this.observer&&a){this.observer.disconnect(),window.SCORE_ITEMS_CHART=JSON.parse(JSON.stringify(A));for(var n=p(A),i=null,r=1;r<n.length;r++)if(n[r].t>=n[r-1].t){var o=n[r].score-n[r-1].score;(!i||i.rate<=o)&&(i={t:n[r].t,rate:o})}this.fmp=i&&i.t||30001;try{this.checkImgs(document.body);var c=Math.max.apply(Math,s(this.imgs.map(function(t){/^(\/\/)/.test(t)&&(t="https:"+t);try{return performance.getEntriesByName(t)[0].responseEnd||0}catch(t){return 0}})));i&&i.t>0&&i.t<36e5?this.setPerformance({fmpImg:parseInt(Math.max(i.t,c))}):this.setPerformance({})}catch(t){this.setPerformance({})}}else setTimeout(function(){t.calFinallScore()},500)}catch(t){}}},{key:"checkImgs",value:function(t){try{var e=t.tagName;if("SCRIPT"!==e&&"STYLE"!==e&&"META"!==e&&"HEAD"!==e){var a=j.getImgSrcFromDom(t);a&&this.imgs.push(a);var n=t.children?t.children.length:0;if(n>0)for(var i=t.children,r=n-1;r>=0;r--)this.checkImgs(i[r])}}catch(t){}}},{key:"setPerformance",value:function(t){try{this.perf.set({atfTime:30001===this.fmp?0:this.fmp,fmp:this.fmp,fmpImg:t.fmpImg||30002,mark:this.mark}),this.sendPerformance()}catch(t){}}},{key:"set",value:function(t){try{this.perf.set(t)}catch(t){}}},{key:"sendPerformance",value:function(){try{this.sendMark=!0,this.perf.send({})}catch(t){}}}]),t}(),L=P,N=function(){try{if(!/\.zhuan\.com([^.]|$)|\.zhuanzhuan\.com([^.]|$)|\.zhuanspirit\.com([^.]|$)|\.zhuaninc\.com([^.]|$)|\.servicewechat\.com([^.]|$)/.test(window.location.origin))return;if("undefined"!=typeof window){var t=new z;new L(t)}}catch(t){console.error(t)}};e.a=N},,,,,function(t,e,a){t.exports=a(15)},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a(9);Object(n.a)()}])});