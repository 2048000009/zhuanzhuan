(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{1084:function(e,t,n){"use strict";var o=n(3);t.__esModule=!0,t.default=void 0;o(n(1));var r=o(n(1426)),c=o(n(1085)),l=o(n(1090));r.default.install=function(e){e.component(r.default.name,r.default),e.component(c.default.name,c.default),e.component(l.default.name,l.default)},r.default.Btn=c.default,r.default.File=l.default;var d=r.default;t.default=d},1085:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var o=d(n(1086)),r=n(13),c=n(830),l=d(n(333));function d(e){return e&&e.__esModule?e:{default:e}}function f(){return(f=Object.assign||function(e){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var t in source)Object.prototype.hasOwnProperty.call(source,t)&&(e[t]=source[t])}return e}).apply(this,arguments)}var h;r.isServer||(h=n(142).default);var m={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"z-upload-btn"},[e._t("default",[n("div",{staticClass:"z-upload-btn-def"},[e._t("btn")],2)]),e.$parent.isAdaptIosUplaod?n("input",{staticClass:"z-upload-input",attrs:{type:"file",disabled:e.$parent.disabled||e.disabled,accept:e.$parent.accept||e.accept,capture:e.$parent.capture||e.capture},on:{change:e.changeHandler,click:e.clickHandler}}):n("input",{staticClass:"z-upload-input",attrs:{type:"file",disabled:e.$parent.disabled||e.disabled,multiple:e.getMultiple,accept:e.$parent.accept||e.accept,capture:e.$parent.capture||e.capture},on:{change:e.changeHandler,click:e.clickHandler}})],2)},name:"z-upload-btn",mixins:[o.default],props:{maxAllowCount:{type:Number,default:10}},data:function(){return{uploadNum:0,stanceNum:0}},computed:{getMultiple:function(){return void 0===this.$parent.multiple?this.multiple:this.$parent.multiple}},methods:{clickHandler:function(e){var t=this;this.$parent.disabled||this.disabled||!this.$parent.initReady?e.preventDefault():(this.$parent.$emit("before-uplaod"),this.$parent.preventDefaultFun(e,(function(n){void 0===n&&(n=!0),n?(t.$parent.zzapp&&(h.in("zz")||h.in("zzseller"))&&(e.preventDefault(),t.uploadNum+=1,t.ZZSdkHandler()),t.$parent.weixinUpload&&(e.preventDefault(),t.WeixinSdkHandler())):e.preventDefault()})))},ZZSdkHandler:function(){var e=this;-1===(this.$parent.accept||this.accept).indexOf("video")?this.$parent.capture||this.capture?h.wrap("getSystemCamera")(f({},this.$parent.getSystemCameraParameter),(function(data){e.handlerZZappUplaodCamera(data)})):h.uploadPhotos(f({maxAllowCount:this.$parent.maxAllowApp||this.maxAllowCount},this.$parent.uploadPhotoshParameter),(function(data){e.handlerZZappUplaod(data)})):h.wrap("chooseMediaPhotos")(f({maxCount:this.$parent.maxAllowApp||this.maxAllowCount},this.$parent.chooseMediaPhotosParameter),(function(data){e.handlerZZappUplaodMedia(data)}))},WeixinSdkHandler:function(){var e=this;this.$parent.$emit("files-added",{}),this.$parent.weixinUpload.chooseImages().then((function(data){var t=data.map((function(e){var t=Math.ceil(6*Math.random()),n={progress:1,response:"",status:e?c.STATUS_SUCCESS:c.STATUS_ERROR,url:"",name:t};return n.response="https://pic"+t+".zhuanstatic.com/zhuanzh/"+e,n.url="https://pic"+t+".zhuanstatic.com/zhuanzh/"+e,n.urlName=e,n}));e.$parent.addAppFiles(t)}))},showLoading:function(){this.stanceNum!==this.uploadNum&&(this.$parent.$emit("files-added",{}),this.$parent.addAppFiles([(0,c.newFile)("zzapp_stance",1e3,c.STATUS_UPLOADING,.1)]),this.stanceNum+=1,this.$parent.isAppUploadLoading&&l.default.loading({mask:!0,duration:0,forbidClick:!0,loadingType:"spinner",message:"正在上传..."}))},hideLoading:function(e){void 0===e&&(e=c.STATUS_SUCCESS),this.$parent.removeFile("zzapp_stance",!1),this.uploadNum-=1,this.stanceNum-=1,this.$parent.isAppUploadLoading&&l.default.clear(),e===c.STATUS_ERROR?(setTimeout((function(){(0,l.default)("上传失败")}),500),this.$parent.$emit("file-error","")):"timeout"===e&&setTimeout((function(){(0,l.default)("上传超时, 请重新上传")}),500)},handlerZZappUplaod:function(data){if(data&&!data.pageState){var code=data.code,e=data.msg;if(0==+code)this.showLoading();else if([1,2].includes(+code)){if(e){var t=e.split("|").map((function(e){var t=Math.ceil(6*Math.random()),n={progress:1,response:"",status:c.STATUS_SUCCESS,url:"",name:t};return n.response="https://pic"+t+".zhuanstatic.com/zhuanzh/"+e,n.url="https://pic"+t+".zhuanstatic.com/zhuanzh/"+e,n.urlName=e,n}));this.hideLoading(),this.$parent.addAppFiles(t)}}else 3==+code&&e?this.hideLoading(c.STATUS_ERROR):-2==+code&&(this.uploadNum-=1)}},handlerZZappUplaodCamera:function(data){data&&data.photoBase64&&this.changeHandler({target:{files:[(0,c.base64toFile)(data.photoBase64)]}})},handlerZZappUplaodMedia:function(data){if(data&&[2,3].includes(+data.code))this.showLoading();else if(data&&0==+data.code||-1==+data.code&&data.videoList&&data.videoList.length||-1==+data.code&&data.imageList&&data.imageList.length){var e=[];data.imageList&&(e=data.imageList.map((function(e){var t=e.imageUrl,n=Math.ceil(6*Math.random()),o={progress:1,response:"",status:c.STATUS_SUCCESS,url:"",name:n,type:"image/jpg"};return o.response="https://pic"+n+".zhuanstatic.com/zhuanzh/"+t,o.url="https://pic"+n+".zhuanstatic.com/zhuanzh/"+t,o.urlName=t,o})));var t=[];data.videoList&&(t=data.videoList.map((function(e){var t={progress:1,status:c.STATUS_SUCCESS,type:"video/mp4",size:e.size,url:e.videoUrl,name:e.videoUrl,coverMD5:e.coverMD5,videoMD5:e.videoMD5,duration:e.duration,coverWidth:e.coverWidth,coverHeight:e.coverHeight,urlName:e.videoUrl.split("zzwos.58cdn.com.cn")[1]};return t.response=-1!==e.coverUrl.indexOf("zhuanstatic")?e.coverUrl:"https://pic"+Math.ceil(6*Math.random())+".zhuanstatic.com/zhuanzh/"+e.coverUrl,t}))),this.hideLoading(),this.$parent.addAppFiles([].concat(e,t))}else!data||-1!=+data.code||data.videoList&&data.videoList.length||data.imageList&&data.imageList.length?data&&-2==+data.code&&(this.uploadNum-=1):this.hideLoading(c.STATUS_ERROR)},changeHandler:function(e){var t=this,n=e.target.files;this.$parent.disabled||this.disabled||!n.length||n&&("video/*"===(this.$parent.accept||this.accept)?this.$parent.asyncProcessVideoFile(n,(function(e){t.$parent.addFiles(e)})):this.$parent.addFiles(n),e.target.value=null)}}};t.default=m},1086:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var o={props:{multiple:{type:Boolean,default:!0},accept:{type:String,default:"image/*"},capture:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1}}};t.default=o},1090:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var o=n(830),r=l(n(157)),c=l(n(331));function l(e){return e&&e.__esModule?e:{default:e}}var d={success:"z-icon-passed",error:"z-icon-warning-o"},f={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"z-upload-file",on:{click:e.clickHandler}},[e._t("default",[n("div",{staticClass:"z-upload-file-def",style:e.fileStyle},[n("z-icon",{staticClass:"z-wrong",attrs:{name:"cross"},on:{click:function(t){return t.stopPropagation(),e.removeFile(t)}}}),n("div",{staticClass:"z-upload-file-state",class:e.fileStatusCls},[n("i",{staticClass:"z-upload-file-status z-icon",class:e.statusCls}),e.$parent.zzapp||e.zzapp||e.$parent.isShowProcess||e.isShowProcess?n("div",{staticClass:"z-upload-file-loading"},[n("z-loading",{attrs:{type:"spinner"}})],1):n("span",{staticClass:"z-upload-file-progress"},[e._v("\n          "+e._s(e.fileProgress)+"\n        ")])])],1),n("div",{staticClass:"z-play",style:e.iconStatusStyle},[n("z-icon",{staticClass:"z-play-circle-o",attrs:{name:"play-circle-o"}})],1),n("div",{directives:[{name:"show",rawName:"v-show",value:(e.$parent.isShowCoverInfo||e.isShowCoverInfo)&&0===e.indexKey,expression:"($parent.isShowCoverInfo || isShowCoverInfo) && indexKey === 0"}],staticClass:"z-upload-cover"},[e._v("\n      "+e._s(e.$parent.coverInfo||e.coverInfo)+"\n    ")])],{imgStyle:e.fileStyle,progress:e.fileProgress})],2)},name:"z-upload-file",components:{"z-icon":r.default,"z-loading":c.default},props:{file:{type:Object,required:!0},indexKey:{type:Number},zzapp:{type:Boolean},coverInfo:{type:String,default:"主图"},isShowCoverInfo:{type:Boolean,default:!1},isShowProcess:{type:Boolean,default:!0},isShowUploadError:{type:Boolean,default:!0},isShowUploadSuccess:{type:Boolean,default:!1}},computed:{fileStatusCls:function(){var e=this.file,t=e.status;return e.progress>=.01&&e.progress<1?"z-upload-file_stat":t===o.STATUS_SUCCESS?this.$parent.isShowUploadSuccess||this.isShowUploadSuccess?"z-upload-file_stat":"z-upload-file_stat-success":t===o.STATUS_ERROR?this.$parent.isShowUploadError||this.isShowUploadError?"z-upload-file_stat":"z-upload-file_stat-error":""},fileStyle:function(){var e=this.$parent.dropOriginFile?this.file.response:this.file.base64||this.file.response;if(e)return{"background-image":'url("'+e+'")',"background-size":this.$parent.imageBgSize}},iconStatusStyle:function(){return{display:this.file.type&&-1!==this.file.type.indexOf("video")&&"success"===this.file.status?"block":"none"}},statusCls:function(){var e=this.file.status;return(this.$parent.isShowUploadSuccess||this.isShowUploadSuccess)&&"success"===e||(this.$parent.isShowUploadError||this.isShowUploadError)&&"error"===e?d[e]:""},fileProgress:function(){return this.statusCls?"100%":Math.min(Math.floor(100*this.file.progress),99)+"%"}},methods:{clickHandler:function(){this.$emit("click",this.file)},removeFile:function(){this.$parent.removeFile(this.file)}}};t.default=f},1282:function(e,t,n){"use strict";e.exports=n(1283)},1283:function(e,t,n){"use strict";var o=n(3);n(1284),n(1290),n(1291),n(1292),n(1293),n(1294),n(1295),n(1296),n(1297),n(1298),n(1299),n(1301),n(1302),n(1303),n(1304),n(1306),n(1321),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(n(252)),c=o(n(1323)),l=o(n(1341)),d=o(n(524));function f(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}function h(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?f(Object(source),!0).forEach((function(t){(0,r.default)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):f(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var m={method:"get",responseType:"json",timeout:0,withCredentials:!0,maxContentLength:2e3,transformRequest:[function(data){return data}],transformResponse:[function(data){return data}],headers:{"Content-Type":"application/x-www-form-urlencoded"}},v=[],S=1,y=c.default.CancelToken;function w(e,t){if(e){var n=e.url+JSON.stringify(e.params),o=v.findIndex((function(i){return i.url===n}));0===S?o>-1?t?t("数据请求中，请稍后"):v.splice(o,1):t&&v.push({url:n,c:t}):1===S&&(o>-1&&(t&&v[o].c("数据请求中，请稍后"),v.splice(o,1)),t&&v.push({url:n,c:t}))}}c.default.interceptors.request.use((function(e){return[0,1].includes(S)&&(e.cancelToken=new y((function(t){w(e,t)}))),e}),(function(e){return Promise.reject(e)})),c.default.interceptors.response.use((function(e){return w(e.config),e}),(function(e){return"数据请求中，请稍后"!==e.message&&v.splice(0,v.length),Promise.reject(e)}));var z=function(e){var t=e||{},n=t.method;if(!t.url)throw new Error("error，请检查入参url");return n&&"jsonp"===n.toLowerCase()?function(e){var t=e.url,n=e.params,o=void 0===n?{}:n,r=-1===t.indexOf("?")?"?":"&";return r+=Object.keys(o).map((function(e){return"".concat(e,"=").concat(encodeURIComponent(o[e]))})).join("&"),new Promise((function(n,o){(0,l.default)("".concat(t).concat(r),{timeout:e.timeout||0,name:e.callback,prefix:e.prefix},(function(e,t){if(e)o(e);else{var data=t;"string"==typeof data&&0===data.indexOf("{")&&(data=JSON.parse(data)),n(data)}}))}))}(e):function(e){var t=e.method&&"post"===e.method.toLowerCase(),n=e.params||{};return S=e.cancelType||1,new Promise((function(o,r){(0,c.default)(Object.assign({},m,h(h({},e),{},{params:t?{}:n,data:t?(0,d.default)(n):n}))).then((function(e){var data=e.data||{};"string"==typeof data&&0===data.indexOf("{")&&(data=JSON.parse(data)),o(data)})).catch((function(e){r(e)}))}))}(e)};t.default=z},1341:function(e,t,n){var o=n(1342)("jsonp");e.exports=function(e,t,n){"function"==typeof t&&(n=t,t={});t||(t={});var script,l,d=t.prefix||"__jp",f=t.name||d+r++,param=t.param||"callback",h=null!=t.timeout?t.timeout:6e4,m=encodeURIComponent,v=document.getElementsByTagName("script")[0]||document.head;h&&(l=setTimeout((function(){S(),n&&n(new Error("Timeout"))}),h));function S(){script.parentNode&&script.parentNode.removeChild(script),window[f]=c,l&&clearTimeout(l)}return window[f]=function(data){o("jsonp got",data),S(),n&&n(null,data)},e=(e+=(~e.indexOf("?")?"&":"?")+param+"="+m(f)).replace("?&","?"),o('jsonp req "%s"',e),(script=document.createElement("script")).src=e,v.parentNode.insertBefore(script,v),function(){window[f]&&S()}};var r=0;function c(){}},1342:function(e,t,n){(function(o){function r(){var e;try{e=t.storage.debug}catch(e){}return!e&&void 0!==o&&"env"in o&&(e=o.env.DEBUG),e}(t=e.exports=n(1343)).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},t.formatArgs=function(e){var n=this.useColors;if(e[0]=(n?"%c":"")+this.namespace+(n?" %c":" ")+e[0]+(n?"%c ":" ")+"+"+t.humanize(this.diff),!n)return;var o="color: "+this.color;e.splice(1,0,o,"color: inherit");var r=0,c=0;e[0].replace(/%[a-zA-Z%]/g,(function(e){"%%"!==e&&(r++,"%c"===e&&(c=r))})),e.splice(c,0,o)},t.save=function(e){try{null==e?t.storage.removeItem("debug"):t.storage.debug=e}catch(e){}},t.load=r,t.useColors=function(){if("undefined"!=typeof window&&window.process&&"renderer"===window.process.type)return!0;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),t.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],t.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}},t.enable(r())}).call(this,n(255))},1343:function(e,t,n){var o;function r(e){function n(){if(n.enabled){var e=n,r=+new Date,c=r-(o||r);e.diff=c,e.prev=o,e.curr=r,o=r;for(var l=new Array(arguments.length),i=0;i<l.length;i++)l[i]=arguments[i];l[0]=t.coerce(l[0]),"string"!=typeof l[0]&&l.unshift("%O");var d=0;l[0]=l[0].replace(/%([a-zA-Z%])/g,(function(n,o){if("%%"===n)return n;d++;var r=t.formatters[o];if("function"==typeof r){var c=l[d];n=r.call(e,c),l.splice(d,1),d--}return n})),t.formatArgs.call(e,l);var f=n.log||t.log||console.log.bind(console);f.apply(e,l)}}return n.namespace=e,n.enabled=t.enabled(e),n.useColors=t.useColors(),n.color=function(e){var i,n=0;for(i in e)n=(n<<5)-n+e.charCodeAt(i),n|=0;return t.colors[Math.abs(n)%t.colors.length]}(e),"function"==typeof t.init&&t.init(n),n}(t=e.exports=r.debug=r.default=r).coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){t.enable("")},t.enable=function(e){t.save(e),t.names=[],t.skips=[];for(var n=("string"==typeof e?e:"").split(/[\s,]+/),o=n.length,i=0;i<o;i++)n[i]&&("-"===(e=n[i].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")))},t.enabled=function(e){var i,n;for(i=0,n=t.skips.length;i<n;i++)if(t.skips[i].test(e))return!1;for(i=0,n=t.names.length;i<n;i++)if(t.names[i].test(e))return!0;return!1},t.humanize=n(1344),t.names=[],t.skips=[],t.formatters={}},1344:function(e,t){var s=1e3,n=6e4,o=60*n,r=24*o;function c(e,t,n){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+n:Math.ceil(e/t)+" "+n+"s"}e.exports=function(e,t){t=t||{};var l,d=typeof e;if("string"===d&&e.length>0)return function(e){if((e=String(e)).length>100)return;var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(!t)return;var c=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*c;case"days":case"day":case"d":return c*r;case"hours":case"hour":case"hrs":case"hr":case"h":return c*o;case"minutes":case"minute":case"mins":case"min":case"m":return c*n;case"seconds":case"second":case"secs":case"sec":case"s":return c*s;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return c;default:return}}(e);if("number"===d&&!1===isNaN(e))return t.long?c(l=e,r,"day")||c(l,o,"hour")||c(l,n,"minute")||c(l,s,"second")||l+" ms":function(e){if(e>=r)return Math.round(e/r)+"d";if(e>=o)return Math.round(e/o)+"h";if(e>=n)return Math.round(e/n)+"m";if(e>=s)return Math.round(e/s)+"s";return e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},1426:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var o,r=y(n(1085)),c=y(n(1090)),l=y(n(1430)),d=y(n(1431)),f=y(n(1432)),h=y(n(1433)),m=y(n(1086)),v=n(13),S=n(830);function y(e){return e&&e.__esModule?e:{default:e}}function w(){return(w=Object.assign||function(e){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var t in source)Object.prototype.hasOwnProperty.call(source,t)&&(e[t]=source[t])}return e}).apply(this,arguments)}v.isServer||(o=n(142).default);var z={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"z-upload"},[e._t("default",[n("div",{staticClass:"z-upload-def z-clearfix",class:{"is-btn-flex":e.isBtnFlex}},[n("upload-btn",{directives:[{name:"show",rawName:"v-show",value:e.isShowBtn,expression:"isShowBtn"}]},[e._t("btn",null,{slot:"btn"})],2),e._l(e.files,(function(t,o){return n("upload-file",{key:o,attrs:{file:t,"index-key":o},on:{click:e.fileClick}})}))],2)])],2)},name:"z-upload",components:{UploadBtn:r.default,UploadFile:c.default},mixins:[m.default],props:{value:{type:Array,default:function(){return[]}},isShowProcess:{type:Boolean,default:!0},action:{type:[String,Object],default:""},dropOriginFile:Boolean,max:{type:Number,default:10},auto:{type:Boolean,default:!0},simultaneousUploads:{type:Number,default:1},processFile:{type:Function,default:function(e,t){t(e)}},preventDefaultFun:{type:Function,default:function(e,t){t()}},asyncProcessVideoFile:{type:Function,default:function(e,t){t(e)}},isShowCoverInfo:{type:Boolean,default:!1},coverInfo:{type:String,default:"主图"},isShowUploadError:{type:Boolean,default:!0},isShowUploadSuccess:{type:Boolean,default:!1},zzapp:{type:Boolean,default:!0},weixin:{type:Boolean,default:!1},videoCover:{type:String,default:"https://pic1.zhuanstatic.com/zhuanzh/n_v222a9cf9709f1463cabcdd76c2e4a4de8.png"},imageBgSize:{type:String,default:"cover"},uploadWeixinOptions:{type:Object,default:function(){return{}}},uploadPhotoshParameter:{type:Object,default:function(){return{businessType:"1",supportEdit:"1"}}},chooseMediaPhotosParameter:{type:Object,default:function(){return{videoLength:"600",isNeedShowVideo:"0",maxImagesCount:"10",maxVideosCount:"10",requestId:"1",supportEdit:"1",businessType:"1",isShowVideoList:"1"}}},getSystemCameraParameter:{type:Object,default:function(){}},getVideoRecorderParameter:{type:Object,default:function(){}},isBtnFlex:{type:Boolean,default:!1},isAppUploadLoading:{type:Boolean,default:!1}},data:function(){return{files:this.value,paused:!this.auto,maxAllowApp:this.max,weixinUpload:null,weixinInitReady:!1,cdnSdkLoaded:!1,isAdaptIosUplaod:!1}},computed:{actionOptions:function(){var e=this.action;return"string"==typeof e?e?{target:e}:null:e},isShowBtn:function(){return this.files.length<this.max},initReady:function(){return this.weixinInitReady&&this.cdnSdkLoaded}},watch:{value:function(e){this.files=e,this.maxAllowApp=this.max-e.length},files:function(e){this.$emit("input",e)},accept:function(e){this.loadCdnSdk()}},created:function(){if(/iphone/.test(v.UA)){var e=(0,S.getiPhoneVersion)(v.UA);1===(0,S.compareVersion)("10.29",e)&&this.accept.includes("video")&&(this.isAdaptIosUplaod=!0)}},mounted:function(){this.loadCdnSdk(),this.initWeixin()},methods:{initWeixin:function(){var e=this;this.weixin&&v.isWechat&&-1===this.accept.indexOf("video")?o.initWxConfig((function(){e.weixinUpload=new h.default(e.uploadWeixinOptions,e.capture),e.weixinInitReady=!0})):this.weixinInitReady=!0},loadCdnSdk:function(){this.cdnSdkLoaded||-1===this.accept.indexOf("video")||((0,S.loadJs)("https://s1.zhuanstatic.com/common/system/js/jquery-1.12.4.min.js"),(0,S.loadJs)("https://s1.zhuanstatic.com/common/system/wos-js-sdk-v2.ajksdhkjas.js"),(0,S.loadJs)("https://s1.zhuanstatic.com/common/system/cos-js-sdk-v5.min.js")),this.cdnSdkLoaded=!0},addAppFiles:function(e){for(var t=this.files.length,n=[],o=this.max-t,i=0,r=e[i];n.length<o&&r;)r.ignore||(n.push(r),this.files.push(r),"zzapp_stance"!==r.name&&this.$emit(r.status===S.STATUS_SUCCESS?"file-success":"file-error",r)),r=e[++i]},addFiles:function(e){var t=this;this.$emit("files-added",e);for(var n=this.files.length,o=[],r=this.max-n,i=0,c=e[i];o.length<r&&c;){if(!c.ignore){o.push(c);var l=(0,S.newFile)();this.files.push(l)}c=e[++i]}(0,S.processFiles)(o,this.processFile,(function(e,o){t.$set(t.files,n+o,e),t.$emit("file-submitted",e)}),(function(){t.$nextTick((function(){t.upload()}))}))},removeFile:function(e,t){void 0===t&&(t=!0),e._xhr&&e._xhr.abort(),e.url&&S.URL.revokeObjectURL(e.url);var n=this.files.findIndex((function(t){return e===t||e===t.name}));this.files.splice(n,1),t&&(this.$emit("file-removed",e),this.upload())},fileClick:function(e){this.$emit("file-click",e)},upload:function(e){var t=this;if(!this.paused&&this.actionOptions)for(var n=w({videoCover:this.videoCover},this.actionOptions),o=this.files.length,r=0,i=0,c=function(){var o=t.files[i],c=o.status;if(c===S.STATUS_READY||e&&c===S.STATUS_ERROR&&o._retryId!==t.retryId){var h=function(n){c===S.STATUS_ERROR&&(n._retryId=t.retryId),t.dropOriginFile&&(delete n.base64,delete n.file),t.$emit(n.status===S.STATUS_SUCCESS?"file-success":"file-error",n),t.upload(e)};o&&o.type&&-1!==o.type.indexOf("image")?(0,l.default)(o,n,h):n.tencentCdnOpt?(0,d.default)(o,n,h):(0,f.default)(o,n,h),r++}else c===S.STATUS_UPLOADING&&r++;i++};i<o&&r<this.simultaneousUploads;)c()},start:function(){this.paused=!1,this.upload()},pause:function(){this.paused=!0,this.files.forEach((function(e){e.status===S.STATUS_UPLOADING&&(e._xhr.abort(),e.status=S.STATUS_READY)}))},retry:function(){this.retryId=Date.now(),this.paused=!1,this.upload(!0)},isComplete:function(){return!this.files.some((function(e){return e.status!==S.STATUS_SUCCESS}))}}};t.default=z},1430:function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e,t,n){var r=t.target,c=t.headers,l=void 0===c?{}:c,d=t.data,data=void 0===d?{}:d,f=t.fileName,h=void 0===f?"file":f,m=t.withCredentials,v=t.timeout,S=t.prop,y=void 0===S?"file":S,w=t.progressInterval,z=void 0===w?100:w,U=t.checkSuccess,T=void 0===U?function(){return!0}:U,C=(0,o.evalOpts)(r,e);e.progress=.02,e.status=o.STATUS_UPLOADING;var x=new window.XMLHttpRequest;e._xhr=x;var _=0;if(x.upload){var O=Date.now();x.upload.onprogress=function(t){if(t.total>0)if(_){clearTimeout(_);var n=Date.now()-O;n>=z?o():_=setTimeout(o,n)}else o(),_=1;function o(){e.progress=t.loaded/t.total,O=Date.now()}}}var A="";if(t.zz)A=JSON.stringify({"Pic-Data":e.base64&&e.base64.replace(/data.*;base64,/,""),"Pic-Size":"0","Pic-Encoding":"base64","Pic-Path":"/zhuanzh/"});else{A=new window.FormData;var R=(0,o.evalOpts)(data,e);Object.keys(R).forEach((function(e){A.append(e,R[e])})),A.append(h,e[y])}x.onload=function(){if(x.status<200||x.status>=300)k(o.STATUS_ERROR);else{!function(){var n=x.responseText||x.response;if(n){var r=Math.ceil(6*Math.random());e.response=t.zz?"https://pic"+r+".zhuanstatic.com/zhuanzh/"+n:n,e.url=t.zz?"https://pic"+r+".zhuanstatic.com/zhuanzh/"+n:"",e.responseHeaders=x.getAllResponseHeaders(),e.urlName=n}else k(o.STATUS_ERROR)}();var n=e.response;if(T.length<=2)k(T(n,e)?o.STATUS_SUCCESS:o.STATUS_ERROR);else T(n,e,(function(e){k(e?o.STATUS_SUCCESS:o.STATUS_ERROR)}))}},x.onerror=function(){k(o.STATUS_ERROR)},x.ontimeout=function(){k(o.STATUS_ERROR)},x.open("POST",C,!0),m&&(x.withCredentials=!0);var E=(0,o.evalOpts)(l,e);Object.keys(E).forEach((function(e){x.setRequestHeader(e,E[e])})),v>0&&(x.timeout=v);function k(t){clearTimeout(_),_=0,e.progress=1,e.status=t,n&&n(e)}x.send(A)},n(45),n(7),n(22),n(58),n(114);var o=n(830)},1431:function(e,t,n){"use strict";var o=n(3);t.__esModule=!0,t.initCos=h,t.getTempUrl=m,t.default=function(e,t,n){var o,l;return r.default.async((function(v){for(;;)switch(v.prev=v.next){case 0:return o=function(t){e.progress=1,e.status=t,n&&n(e)},v.next=3,r.default.awrap(h(t.tencentCdnOpt));case 3:e.progress=.02,e.status=c.STATUS_UPLOADING,l="cs-1255305554/csvideo/"+(0,c.generateKey)(e),f.putObject({Bucket:d,Region:"ap-beijing",Key:l,Body:e.file,onProgress:function(data){data.percent<1&&(e.progress=data.percent)}},(function(n,data){n?o(c.STATUS_ERROR):m({Key:l},(function(n,data){n?o(c.STATUS_ERROR):(e.response=t.videoCover,e.source="tecentCdn",e.url=l,e.urlName=l,e.urlPreview=data.Url,o(c.STATUS_SUCCESS))}))}));case 7:case"end":return v.stop()}}))},n(114),n(4);var r=o(n(512));n(9),n(22),n(86);var c=n(830),l=n(814),d="cs-1255305554",f=null;function h(e){var t;return r.default.async((function(n){for(;;)switch(n.prev=n.next){case 0:if(!f){n.next=2;break}return n.abrupt("return");case 2:if(window.COS){n.next=5;break}return n.next=5,r.default.awrap(r.default.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.default.awrap(new Promise((function(e,t){(0,c.loadJs)("https://s1.zhuanstatic.com/common/system/cos-js-sdk-v5.min.js",e)})));case 2:case"end":return e.stop()}})));case 5:t=e&&"boolean"!=typeof e?e:{},f=new window.COS(Object.assign({},t,{getAuthorization:function(e,t){(0,l.fetch)({url:"https://app.zhuanzhuan.com/fecommon/qcloud/CosSts"}).then((function(e){var n=e.respData.credentials;t({TmpSecretId:n.tmpSecretId,TmpSecretKey:n.tmpSecretKey,XCosSecurityToken:n.sessionToken,ExpiredTime:e.respData.expiredTime})}))}}));case 7:case"end":return n.stop()}}))}function m(e,t){return r.default.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,r.default.awrap(h());case 2:f.getObjectUrl({Bucket:d,Region:"ap-beijing",Key:e.Key,Expires:e.Expires||86400},(function(e,data){data&&data.Url&&(data.Url=data.Url.replace(d+".cos.ap-beijing.myqcloud.com","media.zhuanstatic.com")),t(e,data)}));case 3:case"end":return n.stop()}}))}},1432:function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e,t,n){function r(t){e.progress=1,e.status=t,n&&n(e)}e.progress=.02,e.status=o.STATUS_UPLOADING;var c=e.name+"zzfecommonmd5"+Math.random();new WosSys({appid:"wbuTsRqPowE",bucket:"zzfecommon",wosurl:"//zzwos.58.com",getAppSign:function(t){var n=(e.name.split(".")[1]||"mp4").toLowerCase(),l=["mp4","mov","avi","flv"].includes(n)?n:"mp4";$.ajax({type:"post",url:"https://app.zhuanzhuan.com/zz/transfer/getwostoken",data:{bucket:"zzfecommon",md5:c,expire:"1200",extension:l}}).done((function(e){var n=JSON.parse(e),o=n.respData?n.respData.fileName:"",r=n.respData?n.respData.data:"";t(encodeURIComponent(r),o)})).fail((function(e){r(o.STATUS_ERROR)}))}}).uploadFile((function(n){0===(n=JSON.parse(n)).code?(!function(n){e.response=t.videoCover,e.url=n.data.url;try{e.urlName=n.data.url.split("zzwos.58cdn.com.cn")[1]}catch(e){console.log("video")}}(n),r(o.STATUS_SUCCESS)):r(o.STATUS_ERROR)}),(function(e){r(o.STATUS_ERROR)}),(function(t){t<1&&(e.progress=t)}),"zzfecommon",e.name,e.file,0,1,(function(e){e}),2097152,"")},n(87),n(113);var o=n(830)},1433:function(e,t,n){"use strict";var o=n(3);t.__esModule=!0,t.default=void 0;var r=o(n(512));n(86),n(9),n(22),n(4);var c=o(n(252)),l=n(814),d=n(830),f=function(){function e(e,t){(0,c.default)(this,"wechatConfigErrTimes",0),(0,c.default)(this,"wechatConfigErrMax",3),(0,c.default)(this,"_chooseFinish",!1),(0,c.default)(this,"_uploadFinish",!1),(0,c.default)(this,"_ajaxFinish",!1),(0,c.default)(this,"options",{count:1,sizeType:["compressed"],sourceType:["album"],showLoading:1,wxPublicId:"26",onChooseSuccess:function(e){}}),Object.assign(this.options,{sourceType:t?["camera"]:["album"]},e)}var t=e.prototype;return t.previewImgs=function(e){e&&e.length&&wx.previewImage({current:e[0],urls:e})},t.chooseImages=function(){var e=this;return new Promise((function(t){wx.chooseImage({count:e.options.count,sizeType:e.options.sizeType,sourceType:e.options.sourceType,success:function(n){var o,c,i,img;return r.default.async((function(l){for(;;)switch(l.prev=l.next){case 0:if(o=n.localIds,c=[],o&&o.length){l.next=5;break}return window.eventHub.$emit("toast","请选择需要上传的图片"),l.abrupt("return");case 5:e.options.onChooseSuccess&&e.options.onChooseSuccess(n),i=0;case 7:if(!(i<o.length)){l.next=15;break}return l.next=10,r.default.awrap(e._uploadImage(o[i]));case 10:img=l.sent,c.push(img);case 12:i++,l.next=7;break;case 15:t(c);case 16:case"end":return l.stop()}}))}})}))},t._uploadImage=function(e){var t=this;return r.default.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",new Promise((function(n,o){wx.uploadImage({localId:e,isShowProgressTips:t.options.showLoading,success:function(e){var o,img;return r.default.async((function(c){for(;;)switch(c.prev=c.next){case 0:return o=e.serverId,c.next=3,r.default.awrap(t._getUploadImageFileName(o));case 3:img=c.sent,n(img);case 5:case"end":return c.stop()}}))},fail:function(){n(void 0)}})})));case 1:case"end":return n.stop()}}))},t._getUploadImageFileName=function(e){var source,t,code,data;return r.default.async((function(n){for(;;)switch(n.prev=n.next){case 0:return source=(0,d.getQueryString)("wxPublicId")||this.options.wxPublicId||"26",n.next=3,r.default.awrap((0,l.fetch)({url:"/zzopen/wxcommon/getUploadImageFileName?mediaId="+e+"&source="+source}));case 3:if(t=n.sent,code=+t.respCode,data=t.respData,0!==code){n.next=8;break}return n.abrupt("return",data.result);case 8:case"end":return n.stop()}}),null,this)},e}();t.default=f},814:function(e,t,n){"use strict";var o=n(3);t.__esModule=!0,t.cookie=t.fetch=t.baseURL=void 0,n(4),n(87),n(116);var r=o(n(1282)),c=o(n(504)),l=!n(13).isServer&&location.host.includes("58")?"https://zhuan.58.com":"https://app.zhuanzhuan.com";t.baseURL=l;t.fetch=function(e){return(0,r.default)(Object.assign({},e,{baseURL:l,timeout:6e4}))};var d=c.default.withConverter({write:function(e,t){return e},read:function(e){return e}});t.cookie=d},830:function(e,t,n){"use strict";t.__esModule=!0,t.generateKey=function(e){var t=(Date.now()+Math.random()).toString(36).replace(".",""),n=e.type&&e.type.split("/")[1]||"mp4";return t+"."+n},t.getQueryString=function(e){if(!o)return"";for(var t=window.location.search.substr(1).split("&"),i=0,n=t.length;i<n;i++){var r=t[i].split("=");if(r.shift()===e)return decodeURIComponent(r.join("="))}return""},t.processFile=c,t.processFiles=function(e,t,n,o){for(var r=function(e,t){t(e)},l=[],d=e.length,f=0,h=r,i=0;i<d;i++)h=e[i]&&e[i].type&&-1!==e[i].type.indexOf("video")?r:t,c(e[i],i,h,(function(e,t){if(f++,l[t]=e,n(e,t),f===d)return o(l)}))},t.newFile=l,t.evalOpts=function(data){if("function"==typeof data){for(var e=arguments.length,t=new Array(e>1?e-1:0),n=1;n<e;n++)t[n-1]=arguments[n];return data.apply(this,t)}return data},t.getiPhoneVersion=function(e){return e=(e=(e=e.split("iphone os")[1]).split("like")[0]).trim().replace("_",".")},t.compareVersion=function(e,t){for(var n=e.split(".").map((function(e){return parseInt(e,10)})),o=t.split(".").map((function(e){return parseInt(e,10)})),r=n.length,c=o.length,l=Math.min(r,c),i=0;i<l;++i)if(n[i]!==o[i])return n[i]<o[i]?-1:1;return r===c?0:r<c?-1:1},t.loadJs=function(e,t){var script=document.createElement("script");script.type="text/javascript","function"==typeof t&&(script.readyState?script.onreadystatechange=function(){"loaded"!==script.readyState&&"complete"!==script.readyState||(script.onreadystatechange=null,t())}:script.onload=function(){t()});script.src=e,document.body.appendChild(script)},t.base64toFile=function(e){var t=e.split(","),n=t[0].match(/:(.*?);/)[1],o=Date.now(),r=o+"."+n.split("/")[1],c=atob(t[1]),l=new Uint8Array(c.length),d=c.length;for(;d--;)l[d]=c.charCodeAt(d);return new File([l],r,{type:n,lastModified:o})},t.STATUS_SUCCESS=t.STATUS_ERROR=t.STATUS_UPLOADING=t.STATUS_READY=t.URL=void 0,n(1087),n(514),n(522),n(113),n(99),n(22),n(114);var o="undefined"!=typeof window,r=o?window.URL||window.webkitURL||window.mozURL:null;t.URL=r;t.STATUS_READY="ready";t.STATUS_UPLOADING="uploading";t.STATUS_ERROR="error";function c(e,i,t,n){t(e,(function(e){var t=l(e.name,e.size,"ready",0,e,e.type);n(t,i)}))}function l(e,t,n,progress,o,c){void 0===e&&(e=""),void 0===t&&(t=0),void 0===n&&(n=""),void 0===progress&&(progress=.02),void 0===o&&(o=null);var l=o&&o.base64||"";return{name:e,size:t,url:l?"":function(e){if(e&&r)return r.createObjectURL(e);return""}(o),base64:l,status:n,progress:progress,file:o,type:c,response:""}}t.STATUS_SUCCESS="success"}}]);